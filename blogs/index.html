<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="/assets/css/nav.css">
  <link rel="stylesheet" href="/assets/css/footer.css">
  <link rel="stylesheet" href="/assets/css/blog.css">
  <link rel="stylesheet" href="/assets/css/projects.css">
  <link rel="stylesheet" href="/assets/css/contact.css">
  <link rel="stylesheet" href="/assets/css/contributor.css">
  <link rel="stylesheet" href="/assets/css/achievements.css">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />

  <title>P-society</title>
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
  <!-- bootstrapcdn CSS-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <!-- bootstrapcdn JS-->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <style media="screen">
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    }
  </style>

</head>
<body>
  
  
    <div class="border-bottom">
      <div class="container px-3 py-4">
        <div class="py-4">
          <nav class="navbar fixed-top navbar-expand-lg navbar-light text-change white" id="navbar">
            <a class="navbar-brand brand px-2" href="/">P-SOCIETY</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <div class="navbar-nav ml-auto">
                <a class="nav-item nav-link px-2 text-change" href="/contact/">CONTACT</a>
                <a class="nav-item nav-link px-2 text-change" href="/blogs/">BLOGS</a>
                <a class="nav-item nav-link px-2 text-change" href="https://github.com/p-society">PROJECTS</a>
                <a class="nav-item nav-link px-2 text-change" href="https://iiit-bhcoding.slack.com/">COMMUNITY</a>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </div>
  

  

  <script type="text/javascript">
  var app = document.getElementById('appTop')
  var nav = document.getElementById('navbar')
  var memberNames = document.getElementById('memberNames')
  var last_known_scroll_position = 0;
  var ticking = false;
  function doSomething(scroll_pos) {
    if(scroll_pos<100){
      nav.classList.add("navIn")
      nav.classList.add("fixed-top")
    } else if(scroll_pos>100){
      nav.classList.remove("navIn")
      nav.classList.add("navout")
    }
  }

  window.addEventListener('scroll', function(e) {
    last_known_scroll_position = window.scrollY;
    if (!ticking) {
      window.requestAnimationFrame(function() {
        doSomething(last_known_scroll_position);
        ticking = false;
      })
      ticking = true;
    }
  })
  </script>

      <div>
    <h1 class="text-center"> Latest Blogs</h1>
      <div class="blog-content">
            
            <h2 class="blog-title">ShellRacer</h2>
            <p><figure><img alt="" src="https://cdn-images-1.medium.com/max/657/1*2VHNvOWWNxFK2P0h1GqYug.png"><figcaption>You learn from yourÂ mistakes</figcaption></figure></p>
<p><strong>A little background</strong><br>For months my eyes were set on one goalÂ : the prestigious and famous Google Summer of Code. I had been contributing to my organization like crazy, creating PRs after PRs, raising issues and helping out fellow contributors and other aspiring GSoCers on the communityâ€™s slackÂ team.</p>
<p>The day of the results came and out of the two slots given to my organization my project wasnâ€™t in the list of selected projects. It was hard at first, I thought I had done everything right but still my name wasnâ€™t up there.<br>The next morning I decided not to waste my time anymore and started to look at the bright side of things, contributing to open source project helped me learn invaluable skills like <em>test driven development, CI/CD, git (rebasing, merge conflicts), etc. </em>I may not be getting any stipend for writing code throughout the summer but I earned some invaluable skills which I can use in my future projects.</p>
<p>So it was exam time and I was hacking on one of my projectâ€™s as usual (a CLI tool to upload images to a cloud service) when one of my cool friends (<a href="https://github.com/palash25">Palash Nigam</a>) entered my room and said with a tone of surprise <em>â€œYou donâ€™t know how to touch type? Thatâ€™s patheticâ€. </em>So he introduced me to this site called <a href="http://play.typeracer.com/">typeracer</a> (so I listened to him and started practicing on that site and I was hooked). One of my seniors from college (<a href="https://github.com/shibasisp">Shibasis Patel)</a> gave me this idea of creating a CLI tool to play typeracer (as I had earlier asked him for some project ideas) which we could use to introduce the freshmen to both the shell and touch typing. This gave me a new purpose, so I started coding. After about a week of writing code I am proud to present to you <a href="https://github.com/p-society/typeracer-cli"><strong><em>typeracer-CLI</em></strong></a></p>
<p><strong>What is typeracer-cli?</strong></p>
<p>So it is basically a terminal client for playing typeracer on your shell. As soon as you start the game you will be presented with a paragraph which you have to type out and at the end your time and speed (in wpm) are recorded and presented as anÂ output.</p>
<blockquote>
<strong>Whatâ€™s new about this? CLI versions of this game already exist.<br></strong>Agreed, other versions of this already exists but they donâ€™t offer all the features that this client does,Â like:</blockquote>
<ul>
<li>Practice mode (offlineÂ mode)</li>
<li>User stats (words per minute, timeÂ taken)</li>
<li>Online mode (have a type-race by spawning up a server and sharing it with yourÂ friends)</li>
<li>Ask for a rematch after the race ends (onlineÂ mode)</li>
<li>View the top 10 High scores in onlineÂ mode</li>
</ul>
<p><strong>The motivation behindÂ it</strong></p>
<p>Well, they say failure is a great motivator. I learned this the hard way. Failing in getting selected for GSoC motivated me even more to be a better developer. The other big reason was the desire to do something for my college. I had realized the benefits of working in a developer community during the time I was preparing for GSoC. Although I was a part of my collegeâ€™s Programming Society I hadnâ€™t contributed as actively as I should have. This project turned out to be one of the ways of contributing to my community by spreading awareness about touch typing and CLI tools among young aspiring developers who are just startingÂ out.</p>
<p><strong>Implementation</strong></p>
<p>Initially the task was to get keystrokes from the userâ€™s terminal which at that time I thought was impossible. But I found about readline and keyspress events in nodejs<strong> </strong>which helped me to move further inÂ coding.</p>
<p>The tasks were broken up into the following:</p>
<ul>
<li>Conver this tool to an npmÂ package</li>
<li>Offline practiceÂ mode</li>
<li>Generate random paragraph for everyÂ race</li>
<li>Add more sensible paragraphs</li>
<li>Display the userâ€™s time and speed as theyÂ type</li>
<li>Setup server for onlineÂ mode</li>
<li>Improve the APIÂ Design</li>
<li>Write tests</li>
</ul>
<p><strong>Getting into every point inÂ detail</strong></p>
<blockquote><strong>Converting it to an npmÂ package</strong></blockquote>
<p>This was important task so that one can easily download the package and install it globally from <a href="http://npmjs.com/package/typeracer-cli"><strong>npm</strong></a>. For that we need to use a very important line on the start of the file that is going toÂ execute.</p>
<p>#!/usr/bin/env node is <strong>an instance of a </strong><a href="https://en.wikipedia.org/wiki/Shebang_(Unix)"><strong>shebang</strong></a><strong> line</strong>: the <em>very first line in an executable plain-text file on </em><strong><em>Unix-like platforms</em></strong><em> that tells the system what interpreter to pass that file to for execution</em>, via the command line following the magic #! prefix (called <em>shebang</em>).</p>
<p>Although <strong><em>Windows</em> does <em>not</em> support shebang lines</strong>, so theyâ€™re effectively <em>ignored</em> there; on Windows it is solely a given fileâ€™s <em>filename extension</em> that determines what executable will interpret it. <strong>However, you still need them in the context ofÂ npm.</strong></p>
<blockquote><strong>Implementing the offline (practice) mode</strong></blockquote>
<p>Initially some commands were written for the execution of practice mode. With the help of a package <a href="https://www.npmjs.com/package/commander"><strong>commander</strong></a><strong> </strong>I was able to achieve thisÂ task.</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/70a01a5f02b49d41a027e3637a48cefe/href">https://medium.com/media/70a01a5f02b49d41a027e3637a48cefe/href</a></iframe><p><strong>game() function</strong></p>
<p>This is main logic that allows the application to get keystrokes from the client, but we also have to listen to keypress event for completion of this task. stdin.on('keypress', keypress)</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/23c0d95f2c5d3280e9ad614833c11c47/href">https://medium.com/media/23c0d95f2c5d3280e9ad614833c11c47/href</a></iframe><p>Now in game() I was enabling keypress event after 5 seconds of game, and showing paragraphs to user so that they get time to <em>relax their fingers, twist turn their neck, crack their knuckles </em>and say â€œ<em>bring itÂ onâ€.</em></p>
<p>I was displaying three things to client when they wereÂ typing</p>
<ul><li>Real time analysis of their typing with <em>green, red </em>representing <em>correct </em>and <em>wrong</em> characters respectively.</li></ul>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/c71d04f44c6f5913b7da5697756b81e6/href">https://medium.com/media/c71d04f44c6f5913b7da5697756b81e6/href</a></iframe><ul><li>Real time analysis of their speed in words perÂ minute.</li></ul>
<p>The following snippet explains how to get the speed of a user according to correct words typed byÂ them.</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/4a9f638ac3f3130dd5a9d384a4d7af5a/href">https://medium.com/media/4a9f638ac3f3130dd5a9d384a4d7af5a/href</a></iframe><ul><li>Calculating the timeÂ taken</li></ul>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/2ffca17a24b175e738d55212cf6dc7ed/href">https://medium.com/media/2ffca17a24b175e738d55212cf6dc7ed/href</a></iframe><p>In the end there is an option to <strong>retry</strong> where you can restart the match with generation of new paragraph everyÂ time.</p>
<blockquote><strong>Online Mode</strong></blockquote>
<p>This was very important feature to implement as this sets this client apart from other CLI versions.<br>This was implemented using <strong><em>socket.io </em></strong>accordingly:</p>
<ul>
<li>Creating aÂ server</li>
<li>Connecting clients to theÂ server</li>
<li>Create private room for competition</li>
<li>Send scores to all clients at end ofÂ game</li>
<li>Rematch feature</li>
<li>Random paragraphs for everyÂ race</li>
<li>Top 10 highÂ scores</li>
</ul>
<p><strong>Getting into every point inÂ detail</strong></p>
<blockquote><strong>Creating aÂ server</strong></blockquote>
<p>I am quite fluent with Javascript and NodeJs, so I used NodeJs for creating server of the application and hosted in onÂ <a href="http://glitch.com">Glitch</a>.</p>
<p><a href="http://socket.io">Socket.io</a> was used to provide web sockets for clients to connect and emit events for server to listen. <a href="https://www.mongodb.com/">MongoDB</a> was used as database for storing top 10 high scores ofÂ clients.</p>
<blockquote><strong>Connecting clients toÂ sever</strong></blockquote>
<p>Initially the client part was quite tricky as I had not understood socket.io upto basic level. At first I was working on <em>local server</em> or you can <em>localhost. </em>I was using <a href="https://github.com/socketio/socket.io-client">socket.io client</a> for client side but still took me a whole day to understand the basic and connect a client to theÂ server.</p>
<blockquote><strong>Creating a private room for competition</strong></blockquote>
<p>Now in socket.io you can create different namespace or you can say rooms to join. So I had to get some input from user to create a private channel where they can race otherwise it would create countless problems. I used the crypto node module to provide cryptographic functionality that includes a set of wrappers for OpenSSLâ€™s hash, HMAC, cipher, decipher, sign, and verify functions and generated random strings with it everyÂ time.</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/05d5b99d195f9d3d113b976fc34665d9/href">https://medium.com/media/05d5b99d195f9d3d113b976fc34665d9/href</a></iframe><p>Another problem was how the server would know the number of players in a room so that it can emit an event for race to start. For that I asked number of players from client they wanted to race with (using the npm package <a href="https://www.npmjs.com/package/inquirer">inquirer</a>.)</p>
<p>So when the user joined the room I emitted all the information of client to sever so that it can work according toÂ that.</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/cc43821bd1eb79dfa4872080ee8f7c7e/href">https://medium.com/media/cc43821bd1eb79dfa4872080ee8f7c7e/href</a></iframe><p>Now when the server knew that all the clients have joined the race it emitted an event to clients and started the race. It was important to send random paragraphs on every connection and also same paragraph to all clients in a sameÂ room.</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/131276e59d4c6380441daf7e020bead7/href">https://medium.com/media/131276e59d4c6380441daf7e020bead7/href</a></iframe><p>When everything was in order and every client completed the race, the server emitted an event sending all the scores to every client and asking if they wanted a rematch. Similarly for a rematch random paragraph was generated.</p>
<blockquote><strong>Top 10 highÂ scores</strong></blockquote>
<p>For this feature to work I initially created a shell database with ten anonymous users with their scores initialized to 0. Now whenever someone plays an online game and score greater than 10th highest score in database, it replaces the 10th highest scorer with the user in the database (this was done to avoid excessive use of database).</p>
<iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/3a9844036a2f0d26a914a880a18a94d0/href">https://medium.com/media/3a9844036a2f0d26a914a880a18a94d0/href</a></iframe><p><strong>Support Us</strong></p>
<p>This project was a great learning experience for me and we (my friends and I) are looking to build more such awesome projects in the future. We are a bunch of undergrads passionate about software development looking to make cool stuff. A little motivation and support helps us a lot. If you like this nifty hack you can support us by doing any (or all ğŸ˜‰ ) of the following:</p>
<ul>
<li>â­ï¸ Star us on <a href="https://github.com/p-society/typeracer-cli">Github</a> and make it trend so that other people can know about ourÂ project.</li>
<li>ğŸ‘ Clap for thisÂ article.</li>
<li>Install it and increase our download count onÂ <a href="https://www.npmjs.com/">npm</a>.</li>
<li>Tweet about it (our handle is <em>psociiit</em>).</li>
<li>Share <a href="https://www.npmjs.com/package/typeracer-cli">typeracer-cli</a> on Facebook and like ourÂ <a href="https://www.facebook.com/psocietyiiitbh/">page</a>.</li>
<li>Follow us on <a href="https://www.linkedin.com/company/p-soc/">LinkedIn</a>.</li>
<li>Share it on your slack teams and gitter channels and spread theÂ word.</li>
</ul>
<p>Thanks to <a href="https://github.com/knrt10">Palash Nigam</a> for helping me to write this article and also <a href="https://github.com/shibasisp">Shibasis Patel</a> for sharing this coolÂ idea.</p>
<img src="https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=bbce3efbe888" width="1" height="1"><hr>
<p><a href="https://medium.com/programming-society-gazette/shellracer-bbce3efbe888">ShellRacer</a> was originally published in <a href="https://medium.com/programming-society-gazette">Programming Society Gazette</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p>
            
      </div>
  </div>
  <footer class="footer-under">
  <header class="header-footer">
   <div class="svg-footer">
     <svg id="sun" style="position: absolute;top: 2.5rem;right: 0;" width="160px" height="190px" viewbox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
       <circle cx="170" cy="100" r="100" fill="#F8D71B"></circle>
     </svg>
     <svg id="dunes" width="1399px" height="575px" style="top:10.5rem;left:-25rem;position:absolute" viewbox="0 0 1399 225" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
       <path d="M460.049805,0 C526.688307,0 914.984756,249.041033 914.984756,249.041033 L0,249.041033 C0,249.041033 393.411303,2.21509134e-15 460.049805,0 Z" fill="#F5A623"></path>
       <path d="M460.165305,1 C460.165305,218.282873 1089.92664,248.654319 1089.92664,248.654319 L0,248.654319 C0,248.654319 393.526803,1 460.165305,1 Z" fill="#EE9F21"></path>
       <path d="M839,73 C947.982568,73 1399,249 1399,249 L279,249 C279,249 730.017432,73 839,73 Z" fill="#F5A623"></path>
       <path d="M839,73 C839,183.333997 1055.01296,249 1055.01296,249 L279,249 C279,249 730.017432,73 839,73 Z" fill="#ED9F21"></path>
     </svg>
   </div>
  </header>
  <div class="container-width">
    <div class="footer-container">
      <div class="foot-lists">
        <div class="foot-list">
          <div class="foot-list-item"><a href="/" target="_blank" class="foot-list-item-anchor">About us</a></div>
          <div class="foot-list-item"><a href="/contact/" target="_blank" class="foot-list-item-anchor">Contact</a></div>
          <div class="foot-list-item"><a href="https://medium.com/programming-society-gazette" target="_blank" class="foot-list-item-anchor">Articles</a></div>
          <div class="foot-list-item"><a href="https://iiit-bhcoding.slack.com/" target="_blank" class="foot-list-item-anchor">Slack</a></div>
        </div>
        <div class="foot-list">
          <div class="foot-list-item"><a href="https://github.com/p-society" target="_blank" class="foot-list-item-anchor">Github</a></div>
          <div class="foot-list-item"><a href="https://github.com/p-society/p-society.github.io" target="_blank" class="foot-list-item-anchor">Site source code</a></div>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="form-sub">
        <div class="foot-form-cont">
          <div class="foot-form-title">Follow us</div>
          <div class="foot-list-item">
            <a href="https://www.facebook.com/psocietyiiitbh/" target="_blank" class="foot-list-item-anchor"><i class="fa fa-facebook fa-2x"></i></a>
            <a href="https://twitter.com/psociiit" target="_blank" class="foot-list-item-anchor"><i class="fa fa-twitter fa-2x"></i></a>
            <a href="https://www.linkedin.com/company/p-soc/" target="_blank" class="foot-list-item-anchor"><i class="fa fa-linkedin fa-2x"></i></a>
            <a href="https://medium.com/programming-society-gazette" target="_blank" class="foot-list-item-anchor"><i class="fa fa-medium fa-2x"></i></a>
            <a href="https://dribbble.com/psociiit" target="_blank" class="foot-list-item-anchor"><i class="fa fa-dribbble fa-2x"></i></a>
          </div>
          <div class="foot-form-desc">We will be happy to have you. <img class="emoji" title=":wink:" alt=":wink:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f609.png" height="20" width="20">
</div>
        </div>
      </div>
    </div>
  </div>
  <div class="copyright">
    <div class="made-with">
      made with <img class="emoji" title=":heart:" alt=":heart:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/2764.png" height="20" width="20"> by <a href="https://github.com/p-society" target="_blank">p-society</a>
    </div>
    <div class="clearfix"></div>
  </div>
</footer>

</body>
</html>
